<!DOCTYPE html>
<html>
<head>
    <title>Loan Calculator</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Loan Calculator</h1>
    <form id="loan-form">
        <label for="principal">Principal:</label>
        <input type="number" id="principal" step="0.01" required>
        <br>
        <label for="interest_rate">Interest Rate (%):</label>
        <input type="number" id="interest_rate" step="0.01" required>
        <br>
        <label for="years">Years:</label>
        <input type="number" id="years" required>
        <br>
        <button type="submit">Calculate</button>
    </form>
    <div id="results"></div>
		
		<script>
			// loan_calculator.js
			$(document).ready(function() {
					$('#loan-form').submit(function(event) {
							event.preventDefault();

							let principal = $('#principal').val();
							let interest_rate = $('#interest_rate').val();
							let years = $('#years').val();

							$.ajax({
									url: 'cgi-bin/loan_calculator_cgi',
									data: {
											principal: principal,
											interest_rate: interest_rate,
											years: years
									},
									dataType: 'json',
									success: function(data) {
											let results = `<p>Monthly Payment: ${data.monthly_payment.toFixed(2)}</p>
																		<p>Total Payment: ${data.total_payment.toFixed(2)}</p>`;
											$('#results').html(results);
									}
							});
					});
			});
		</script>
</body>
</html>
